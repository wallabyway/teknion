!function(){"use strict";function a(a,b){Autodesk.Viewing.Extension.call(this,a,b)}function b(a){function b(){return 100*a.model.getUnitScale()}function c(a){var b=a[1];return a[1]=-a[2],a[2]=b,a}function g(a,b){var c=b.model.getData().globalOffset;return c&&(a[0]+=c.x,a[1]+=c.y,a[2]+=c.z),a}var i=new Autodesk.Viewing.Private.ViewerState(a).getState(),j=i.viewport,k=j.eye,l=j.target,m=j.up;k=g(k,a),l=g(l,a),k=c(k),l=c(l),m=c(m),l=e([l[0]-k[0],l[1]-k[1],l[2]-k[2]]),m=e(m);var n=function(a){return a.isOrthographic?a.orthographicHeight*a.aspectRatio:f(Math.tan(h(a.fieldOfView)*a.aspectRatio))}(j),o=d(a),p={Projection:{Extent:n,IsOrthographic:j.isOrthographic,NativeAspect:j.aspectRatio},Units:o,View:{Eye:k,At:l,Up:m}};return function(a){var c=b(a.Units);a.View.Eye[0]*=c,a.View.Eye[1]*=c,a.View.Eye[2]*=c,a.Projection.IsOrthographic&&(a.Projection.Extent*=c)}(p),p.Units="CENTIMETER",p}function c(a,b){function c(a,b){var c=1/(100*b.model.getUnitScale());switch(a.toUpperCase()){case"FOOT":1/30.48;break;case"INCH":1/2.54;break;case"KILOMETER":1e-5;break;case"METER":.01;break;case"CENTIMETER":1;break;case"MILLIMETER":10}return c}function d(a){var b=a[1];return a[1]=a[2],a[2]=-b,a}b=JSON.parse(JSON.stringify(b)),b.Projection.IsOrthographic=b.Projection.IsOrthographic||b.Projection.isOrthographic;var h=d(b.View.Eye),i=e(d(b.View.At)),j=e(d(b.View.Up)),k=b.Projection.NativeAspect,l=b.Projection.IsOrthographic,m=l?"orthographic":"perspective",n={viewport:{eye:h,target:[h[0]+i[0],h[1]+i[1],h[2]+i[2]],up:j,aspectRatio:k,projection:m,isOrthographic:l}};!function(a,b){var c=b.Projection,d=c.NativeAspect;c.IsOrthographic?a.viewport.orthographicHeight=c.Extent/d:a.viewport.fieldOfView=g(f(Math.tan(c.Extent))/d)}(n,b),function(a,b,d){var e=c(b.Units,d);a.viewport.eye[0]*=e,a.viewport.eye[1]*=e,a.viewport.eye[2]*=e,a.viewport.isOrthographic&&(a.viewport.orthographicHeight*=e)}(n,b,a),function(a,b){var c=b.model.getData().globalOffset;c&&(a[0]-=c.x,a[1]-=c.y,a[2]-=c.z)}(n.viewport.eye,a),n.viewport.target=[n.viewport.eye[0]+10*i[0],n.viewport.eye[1]+10*i[1],n.viewport.eye[2]+10*i[2]],new Autodesk.Viewing.Private.ViewerState(a).restoreState(n)}function d(a){switch(a.model.getUnitScale()){case 1:return"METER";case.3048:return"FOOT";case.0254:return"INCH";case.01:return"CENTIMETER";case.001:return"MILLIMETER";case 1e3:return"KILOMETER";default:return"METER"}}function e(a){var b=a[0],c=a[1],d=a[2],e=Math.sqrt(b*b+c*c+d*d);if(0===e)return a;var f=1/e;return[b*f,c*f,d*f]}function f(a){var b=Math.atan(a);return b<0?b+Math.PI:b}function g(a){return a*(180/Math.PI)}function h(a){return a*(Math.PI/180)}var i=AutodeskNamespace("Autodesk.Viewing.Extensions.RaaS");j=Object.create(Autodesk.Viewing.Extension.prototype),j.constructor=a,i.RaaS=a;var j=a.prototype;j.load=function(){return!0},j.unload=function(){return!0},j.setShot=function(a){},j.getShot=function(){},j.getCameraAsRenderDescriptor=function(){return b(this.viewer)},j.setCameraFromViewName=function(a){this.viewer.model.getDocumentNode().search({type:"3d",role:"view"}),this.viewer.setViewCube(a)},j.setCameraFromRenderDescriptor=function(a){return c(this.viewer,a)},Autodesk.Viewing.theExtensionManager.registerExtension("Autodesk.RaaS",a)}();